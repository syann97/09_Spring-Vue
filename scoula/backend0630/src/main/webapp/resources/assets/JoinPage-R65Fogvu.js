import{r as p,f as U,c as k,a,b as i,w as d,n as D,t as x,v as u,d as E,u as h,e as I}from"./index-DkFVtcJ9.js";import{a as f}from"./index-Dq7h7Pqt.js";const v="/api/member",T={headers:{"Content-Type":"multipart/form-data"}},b={async checkUsername(t){const{data:l}=await f.get(`${v}/checkusername/${t}`);return console.log("AUTH GET CHECK USERNAME",l),l},async create(t){const l=new FormData;l.append("username",t.username),l.append("email",t.email),l.append("password",t.password),t.avatar&&l.append("avatar",t.avatar);const{data:o}=await f.post(v,l,T);return console.log("AUTH POST:",o),o}},S={class:"mt-5 mx-auto",style:{width:"500px"}},V={class:"mb-3 mt-3"},A={for:"username",class:"form-label"},C={class:"mb-3 mt-3"},B={class:"mb-3 mt-3"},H={class:"mb-3"},M={class:"mb-3"},N=["disabled"],P={__name:"JoinPage",setup(t){const l=h(),o=p(null),m=p(""),r=p(!0),e=U({username:"hong",email:"hong@gmail.com",password:"12",password2:"12",avatar:null}),w=async()=>{if(!e.username)return alert("사용자 ID를 입력하세요.");r.value=await b.checkUsername(e.username),console.log(r.value,typeof r.value),m.value=r.value?"이미 사용중인 ID입니다.":"사용가능한 ID입니다."},y=()=>{r.value=!0,m.value=e.username?"ID 중복 체크를 하셔야 합니다.":""},g=async()=>{if(e.password!==e.password2)return alert("비밀번호가 일치하지 않습니다.");o.value&&o.value.files.length>0&&(e.avatar=o.value.files[0]);try{await b.create(e),l.push({name:"home"})}catch(c){console.error(c)}};return(c,s)=>(I(),k("div",S,[s[11]||(s[11]=a("h1",{class:"my-5"},[a("i",{class:"fa-solid fa-user-plus"}),i(" 회원가입")],-1)),a("form",{onSubmit:E(g,["prevent"])},[a("div",V,[a("label",A,[s[4]||(s[4]=a("i",{class:"fa-solid fa-user"},null,-1)),s[5]||(s[5]=i(" 사용자 ID: ")),a("button",{type:"button",class:"btn btn-success btn-sm py-0 ms-2",onClick:w}," ID 중복 확인 "),a("span",{class:D(r.value?"text-primary":"text-danger")},x(m.value),3)]),d(a("input",{type:"text",class:"form-control",placeholder:"사용자 ID",id:"username",onInput:y,"onUpdate:modelValue":s[0]||(s[0]=n=>e.username=n)},null,544),[[u,e.username]])]),a("div",C,[s[6]||(s[6]=a("label",{for:"avatar",class:"form-label"},[a("i",{class:"fa-solid fa-user-astronaut"}),i(" 아바타 이미지: ")],-1)),a("input",{type:"file",class:"form-control",ref_key:"avatar",ref:o,id:"avatar",accept:"image/png, image/jpeg"},null,512)]),a("div",B,[s[7]||(s[7]=a("label",{for:"email",class:"form-label"},[a("i",{class:"fa-solid fa-envelope"}),i(" Email ")],-1)),d(a("input",{type:"email",class:"form-control",placeholder:"Email",id:"email","onUpdate:modelValue":s[1]||(s[1]=n=>e.email=n)},null,512),[[u,e.email]])]),a("div",H,[s[8]||(s[8]=a("label",{for:"password",class:"form-label"},[a("i",{class:"fa-solid fa-lock"}),i(" 비밀번호: ")],-1)),d(a("input",{type:"password",class:"form-control",placeholder:"비밀번호",id:"password","onUpdate:modelValue":s[2]||(s[2]=n=>e.password=n)},null,512),[[u,e.password]])]),a("div",M,[s[9]||(s[9]=a("label",{for:"password2",class:"form-label"},[a("i",{class:"fa-solid fa-lock"}),i(" 비밀번호 확인: ")],-1)),d(a("input",{type:"password",class:"form-control",placeholder:"비밀번호 확인",id:"password2","onUpdate:modelValue":s[3]||(s[3]=n=>e.password2=n)},null,512),[[u,e.password2]])]),a("button",{type:"submit",class:"btn btn-primary mt-4",disabled:r.value},s[10]||(s[10]=[a("i",{class:"fa-solid fa-user-plus"},null,-1),i(" 확인 ")]),8,N)],32)]))}};export{P as default};
