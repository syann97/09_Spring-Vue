import{r,o as S,c as u,a as o,b as m,w as p,v,d as c,t as i,F as k,e as d}from"./index-DkFVtcJ9.js";import{a as w}from"./index-Dq7h7Pqt.js";const y={key:0},x={key:1},N={__name:"LoginPage",setup(b){const n=r(!1),s=r({}),a=r({username:"",password:""}),g=async()=>{try{const t=await w.post("/api/auth/login",a.value);console.log("response.data : ",t.data);const{token:e,user:l}=t.data;localStorage.setItem("authToken",e),localStorage.setItem("userInfo",e),localStorage.setItem("userInfo",JSON.stringify(l)),n.value=!0,s.value=l,a.value={username:"",password:""}}catch(t){console.error(t)}},f=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userInfo"),n.value=!1},I=()=>{const t=localStorage.getItem("authToken"),e=localStorage.getItem("userInfo");t&&e?(n.value=!0,s.value=JSON.parse(e)):(n.value=!1,s.value={})};return S(()=>{I()}),(t,e)=>(d(),u(k,null,[e[6]||(e[6]=o("h2",null,"로그인 테스트",-1)),n.value?(d(),u("div",x,[e[5]||(e[5]=o("h1",null,"환영합니다!!!",-1)),o("p",null,[o("strong",null,"사용자명: "+i(s.value.username),1)]),o("p",null,[o("strong",null,"이메일: "+i(s.value.email),1)]),o("p",null,[o("strong",null,"권한: "+i(s.value.roles),1)]),o("button",{onClick:f},"로그아웃")])):(d(),u("div",y,[o("form",{onSubmit:c(g,["prevent"])},[o("div",null,[e[2]||(e[2]=m(" username : ")),p(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>a.value.username=l)},null,512),[[v,a.value.username]])]),o("div",null,[e[3]||(e[3]=m(" password : ")),p(o("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=l=>a.value.password=l)},null,512),[[v,a.value.password]])]),e[4]||(e[4]=o("div",null,[o("button",{type:"submit"},"로그인")],-1))],32)]))],64))}};export{N as default};
