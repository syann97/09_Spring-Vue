import{h as C,r as V,a as m,b as f,d as e,e as n,w as k,v as g,F as w,p as A,g as F,i as U,o as c,t as D}from"./index-aFEdOi6g.js";import{b as p}from"./boardApi-nGcywmcg.js";import"./index-CzUDexBv.js";const M={class:"mb-3 mt-3"},R={class:"mb-3 mt-3"},S=["onClick"],T={class:"mb-3 mt-3"},E={class:"mb-3 mt-3"},j={__name:"BoardUpdatePage",setup(I){const i=C(),b=U(),u=i.params.no,l=V({}),r=m([]),o=m({}),d=m(null),x=()=>{b.push({name:"board/detail",params:{no:u},query:i.query})},q=async(a,t)=>{if(!confirm(t+"을 삭제할까요?"))return;await p.deleteAttachment(a);const s=r.value.findIndex(y=>y.no===a);r.value.splice(s,1)},B=async()=>{confirm("수정할까요?")&&(d.value.files.length>0&&(l.files=d.value.files),await p.update(l),b.push({name:"board/detail",params:{no:u},query:i.query}))},v=()=>{l.no=o.value.no,l.title=o.value.title,l.writer=o.value.writer,l.content=o.value.content,console.log(l)};return(async()=>{const a=await p.get(u);o.value={...a},r.value=a.attaches,v()})(),(a,t)=>(c(),f(w,null,[t[11]||(t[11]=e("h1",null,[e("i",{class:"fa-regular fa-pen-to-square"}),n(" 글 수정")],-1)),e("form",{onSubmit:F(B,["prevent"])},[e("div",M,[t[2]||(t[2]=e("label",{for:"title",class:"form-label"},"제목",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"제목",id:"title","onUpdate:modelValue":t[0]||(t[0]=s=>l.title=s)},null,512),[[g,l.title]]),t[3]||(t[3]=e("div",{class:"invalid-feedback"},"제목은 필수 요소입니다.",-1))]),e("div",R,[t[5]||(t[5]=e("label",{class:"form-label"},"기존 첨부파일",-1)),(c(!0),f(w,null,A(r.value,s=>(c(),f("div",{key:s.no,class:"attach"},[t[4]||(t[4]=e("i",{class:"fa-solid fa-paperclip"},null,-1)),n(" "+D(s.filename)+" ",1),e("i",{class:"fa-solid fa-trash-can text-danger ms-2",onClick:y=>q(s.no,s.filename)},null,8,S)]))),128))]),e("div",T,[t[6]||(t[6]=e("label",{for:"files",class:"form-label"},"첨부파일",-1)),e("input",{type:"file",class:"form-control",placeholder:"첨부파일",id:"files",ref_key:"files",ref:d,multiple:""},null,512)]),e("div",E,[t[7]||(t[7]=e("label",{for:"content",class:"form-label"},"내용",-1)),k(e("textarea",{class:"form-control",placeholder:"내용",id:"content","onUpdate:modelValue":t[1]||(t[1]=s=>l.content=s),rows:"10"},null,512),[[g,l.content]])]),e("div",{class:"my-5 text-center"},[t[10]||(t[10]=e("button",{type:"submit",class:"btn btn-primary me-3"},[e("i",{class:"fa-solid fa-check"}),n(" 확인 ")],-1)),e("button",{type:"button",class:"btn btn-primary me-3",onClick:v},t[8]||(t[8]=[e("i",{class:"fa-solid fa-undo"},null,-1),n(" 취소 ")])),e("button",{class:"btn btn-primary",onClick:x},t[9]||(t[9]=[e("i",{class:"fa-solid fa-arrow-left"},null,-1),n(" 돌아가기 ")]))])],32)],64))}};export{j as default};
