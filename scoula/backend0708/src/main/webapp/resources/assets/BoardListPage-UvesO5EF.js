import{b as _}from"./boardApi-nGcywmcg.js";import{h}from"./moment-C5S46NFB.js";import{a as q,c as k,r as C,h as V,m as B,b as p,d as t,e as i,t as u,F as D,p as I,j as d,k as l,l as y,q as m,i as N,o as g}from"./index-aFEdOi6g.js";import"./index-CzUDexBv.js";const Y={class:"mt-5 text-end"},L={class:"table table-striped"},R=["src"],A={class:"my-5 d-flex"},F={class:"flex-grow-1 text-center"},H={__name:"BoardListPage",setup(M){const s=V(),b=N(),n=q({}),v=k(()=>n.value.list||[]),o=C({page:parseInt(s.query.page)||1,amount:parseInt(s.query.amount)||10}),w=async r=>{b.push({query:{page:r,amount:o.amount}})};B(s,async r=>{console.log("WATCH",s.query.page),o.page=parseInt(s.query.page)||1,o.amount=parseInt(s.query.amount)||10,await f(o)});const f=async r=>{try{n.value=await _.getList(r),console.log(n.value)}catch(e){console.error("목록 로드 실패:",e)}};return f(),(r,e)=>{const c=y("router-link"),x=y("vue-awesome-paginate");return g(),p("div",null,[e[7]||(e[7]=t("h1",{class:"mb-3"},[t("i",{class:"fa-solid fa-paste"}),i(" 게시글 목록")],-1)),t("div",Y,"(총 "+u(n.value.totalCount)+"건)",1),t("table",L,[e[1]||(e[1]=t("thead",null,[t("tr",null,[t("th",{style:{width:"60px"}},"No"),t("th",null,"제목"),t("th",{style:{width:"200px"}},"작성자"),t("th",{style:{width:"120px"}},"작성일")])],-1)),t("tbody",null,[(g(!0),p(D,null,I(v.value,a=>(g(),p("tr",{key:a.no},[t("td",null,u(a.no),1),t("td",null,[d(c,{to:{name:"board/detail",params:{no:a.no},query:m(s).query}},{default:l(()=>[i(u(a.title),1)]),_:2},1032,["to"])]),t("td",null,[t("img",{src:`/api/member/${a.writer}/avatar`,style:{height:"20px"}},null,8,R),i(" "+u(a.writer),1)]),t("td",null,u(m(h)(a.regDate).format("YYYY-MM-DD")),1)]))),128))])]),t("div",A,[t("div",F,[d(x,{"total-items":n.value.totalCount,"items-per-page":o.amount,"max-pages-shown":5,"show-ending-buttons":!0,modelValue:o.page,"onUpdate:modelValue":e[0]||(e[0]=a=>o.page=a),onClick:w},{"first-page-button":l(()=>e[2]||(e[2]=[t("i",{class:"fa-solid fa-backward-fast"},null,-1)])),"prev-button":l(()=>e[3]||(e[3]=[t("i",{class:"fa-solid fa-caret-left"},null,-1)])),"next-button":l(()=>e[4]||(e[4]=[t("i",{class:"fa-solid fa-caret-right"},null,-1)])),"last-page-button":l(()=>e[5]||(e[5]=[t("i",{class:"fa-solid fa-forward-fast"},null,-1)])),_:1},8,["total-items","items-per-page","modelValue"])]),t("div",null,[d(c,{to:{name:"board/create",query:m(s).query},class:"btn btn-primary"},{default:l(()=>e[6]||(e[6]=[t("i",{class:"fa-solid fa-pen-to-square"},null,-1),i(" 글 작성 ")])),_:1,__:[6]},8,["to"])])])])}}};export{H as default};
